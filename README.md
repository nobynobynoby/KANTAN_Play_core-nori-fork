# KANTAN_Play_core（のり私家Fork版）

> ※このリポジトリは [`InstaChord/KANTAN_Play_core`](https://github.com/InstaChord/KANTAN_Play_core) の私家Fork（のり版）です。

---

## 元READMEについて

元リポジトリのREADME内容は [`README_original.md`](./README_original.md) にそのまま収録しています。  
詳細な仕様や説明はこちらをご覧ください。

---

## このForkの変更点・追加機能

- BLE-MIDIの修正・追加
  - SysExの終端がうまく取得できず、MIDIメッセージがバッファにたまったままとなる件修正
  - パケット内に複数のMIDIメッセージが含まれる場合、同一のメッセージが重複する件修正
  - タイムスタンプをステータスと誤って解釈する件修正
  - 要再接続機器の接続機能(自動切断-再接続)の追加
- ノートモードの音色変更
  - スロット設定メニューの末尾にノートモードの音色を選択する機能を追加
  - ノートモードの音色をユーザーソングスデータに保持/読み込みする機能を追加
- ロック機能の追加
  - ベースロック(B-Lock)機能追加。ロックボタン押下後、他のコードボタンでシーケンスを進めてもベースはオンコードとして残りづける。
  - コードロック(C-Lock)機能追加。ロックボタン押下後、他のコードボタンでシーケンスを進めてもベースのみがコードに追従し、ベース音以外はロック時のコードのままシーケンスが進む。
  - 双方ロック時には他のコードボタンが押されてもアルペジエータは先頭に戻らない(同じコードボタンが押されている扱い)
  - ※現状ベース音側の調号(♯♭)は未対応
- PbHUB接続機能の追加
  - [`Unit Pbhub v1.1`](https://docs.m5stack.com/en/unit/pbhub_1.1)を使用できるように修正。アドレス0x61～0x64、使用ポートは0～3限定(4,5は使用不可)
  - 各Grove端子に[`Unit Dual Button`](https://docs.m5stack.com/en/unit/dual_button)の接続を想定
- 組み合わせの追加機能
  - 5/7,3~/6b追加(追加サンプル)
  - 4機能組み合わせ時の境界チェック漏れ修正

---

## ブランチ運用について

- 安定版は `main` ブランチ  
- 開発用は `develop` ブランチを使用  
- 各機能ごとに独立したブランチで開発中です

---

ご質問・要望があればお気軽にお問い合わせください。
